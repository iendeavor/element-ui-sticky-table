System.register("ElementUiStickyTable",[],(function(e){"use strict";return{execute:function(){const t=document.createElement("style");function l(e,t){if(void 0===e)return!1;if(null===e)return!1;let l=e.getBoundingClientRect();e=e.parentNode;do{if(l=e.getBoundingClientRect(),t>l.bottom)return!0;e=e.parentNode}while(e!==document.documentElement);return!1}t.type="text/css",t.innerHTML=".stop-scrolling { overflow-y: hidden; }",document.getElementsByTagName("head")[0].appendChild(t);e("default",{inheritAttrs:!0,data:()=>({tableNode:null,isSticking:!1,oldScrollableParentNodes:[],maxHeight:null}),computed:{scrollableParentNodes(){const e=[];try{let t=this.tableNode.parentElement;for(;null!==t;)t.clientHeight<t.scrollHeight&&e.push(t),t.classList.contains("el-table__body-wrapper")&&e.push(t),t.classList.contains("el-dialog__wrapper")&&e.push(t),t=t.parentElement}catch(e){}return e}},watch:{scrollableParentNodes:{immediate:!0,handler(){null!==this.oldScrollableParentNodes&&this.oldScrollableParentNodes.forEach(e=>e.removeEventListener("scroll",this.handleScrollY)),this.scrollableParentNodes.forEach(e=>e.addEventListener("scroll",this.handleScrollY)),this.oldScrollableParentNodes=[...this.scrollableParentNodes]}},data:{immediate:!0,deep:!0,handler(){this.maxHeight=null,this.stick()}}},mounted(){this.tableNode=this.$refs.table.$el,window.addEventListener("resize",this.handleResize)},beforeDestroy(){this.scrollableParentNodes.forEach(e=>e.removeEventListener("scroll",this.handleScrollY)),window.removeEventListener("resize",this.handleResize)},methods:{handleResize(e){this.maxHeight=null,this.stick()},handleScrollY(e){this.stick(e)},stick(e){!function(e){if(void 0===e)return!1;if(null===e)return!1;let t=e.getBoundingClientRect(),l=t.top;e=e.parentNode;do{if(t=e.getBoundingClientRect(),l<=t.bottom==!1)return!1;if(l<t.top)return!0;e=e.parentNode}while(e!==document.documentElement);return!1}(this.tableNode)?this.removeSticky():this.addSticky()},addSticky(){this.isSticking||(this.isSticking=!0,this.scrollableParentNodes.forEach(e=>e.classList.add("stop-scrolling")),setTimeout(()=>this.scrollableParentNodes.forEach(e=>e.classList.remove("stop-scrolling")),0),this.calcHeight())},removeSticky(){!1!==this.isSticking&&(this.isSticking=!1,this.maxHeight=null)},calcHeight(){if(null!==this.maxHeight)return;let e=0,t=document.body.scrollHeight,n=0,i=null;for(;++e<100&&n<t;)i=Math.floor((t+n)/2),l(this.tableNode,i)?t=i-1:n=i+1;this.maxHeight=i}},template:'\n  <el-table\n    ref="table"\n    v-bind="$attrs"\n    v-on="$listeners"\n    :max-height="maxHeight"\n  >\n    <slot>\n      <template></template>\n    </slot>\n    <template name="header">\n      <template slot="header"></template>\n    </template>\n  </el-table>\n  '})}}}));
